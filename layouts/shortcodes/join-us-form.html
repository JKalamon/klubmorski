<form id="join-us-form" action="https://formspree.io/f/mnqypbln" method="POST">
  <div class="row">
    <div class="col-12 col-lg-6 mt-3">
      <label class="form-label" for="name"
        >Imię<span class="text-danger">*</span></label
      >
      <input type="text" name="name" id="name" class="form-control" required />
    </div>

    <div class="col-12 col-lg-6 mt-3">
      <label class="form-label" for="surname"
        >Nazwisko<span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="surname"
        id="surname"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 col-lg-6 mt-3">
      <label class="form-label" for="street"
        >Ulica<span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="street"
        id="street"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 col-lg-3 mt-3">
      <label class="form-label" for="building-number"
        >Nr domu<span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="building-number"
        id="building-number"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 col-lg-3 mt-3">
      <label class="form-label" for="door-number">Nr mieszkania</label>
      <input
        type="text"
        name="door-number"
        id="door-number"
        class="form-control"
      />
    </div>

    <div class="col-12 col-lg-3 mt-3">
      <label class="form-label" for="zip-code"
        >Kod pocztowy<span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="zip-code"
        id="zip-code"
        class="form-control"
        placeholder="XX-XXX"
        required
      />
    </div>

    <div class="col-12 col-lg-9 mt-3">
      <label class="form-label" for="city"
        >Miejscowość <span class="text-danger">*</span></label
      >
      <input type="text" name="city" id="city" class="form-control" required />
    </div>

    <div class="col-12 mt-3">
      <label class="form-label" for="birth-date"
        >Data urodzenia <span class="text-danger">*</span></label
      >
      <input
        type="date"
        name="birth-date"
        id="birth-date"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 col-lg-6 mt-3">
      <label class="form-label" for="phone">Nr telefonu</label>
      <input type="text" name="phone" id="phone" class="form-control" />
    </div>

    <div class="col-12 col-lg-6 mt-3">
      <label class="form-label" for="email"
        >Email <span class="text-danger">*</span></label
      >
      <input
        type="email"
        name="email"
        id="email"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 mt-3">
      <hr />
    </div>

    <div class="col-12 mt-3">
      <label class="form-label" for="sail-rank"
        >Posiadany stopień wyszkolenia żeglarskiego
        <span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="sail-rank"
        id="sail-rank"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 mt-3">
      <label class="form-label" for="sail-rank-aquire-date"
        >Data uzyskania <span class="text-danger">*</span></label
      >
      <input
        type="date"
        name="sail-rank-aquire-date"
        id="sail-rank-aquire-date"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 mt-3">
      <label class="form-label" for="sail-rank-number"
        >Number patentu, organ wydający
        <span class="text-danger">*</span></label
      >
      <input
        type="text"
        name="sail-rank-number"
        id="sail-rank-number"
        class="form-control"
        required
      />
    </div>

    <div class="col-12 mt-3">
      <label class="form-label" for="sail-rank-number"
        >Number patentu, organ wydający
        <span class="text-danger">*</span></label
      >
      <select
        type="date"
        name="sail-rank-number"
        id="sail-rank-number"
        class="form-select"
        required
      >
        <option>Umiem pływać wpław</option>
        <option>Nie umiem pływać wpław</option>
      </select>
    </div>

    <div class="col-12 mt-3">
      <input
        class="form-check-input"
        type="checkbox"
        value=""
        id="confirm"
        required
      />
      <label class="form-check-label d-inline ml-1" for="confirm">
        Proszę o przyjęcie mnie w szeregi członków Jacht Klubu Morskiego „Joseph
        Conrad” w Kołobrzegu. Oświadczam, że zapoznałem (am) się ze Statutem
        Jacht Klubu Morskiego „Joseph Conrad” i zobowiązuję się do jego
        respektowania. Ponadto oświadczam, że będę aktywnie działał(a) na rzecz
        rozwoju Klubu oraz żeglarstwa. Oświadczam również, że w czasie zajęć
        szkoleniowych oraz żeglowania będę bezwzględnie przestrzegać zasad
        bezpieczeństwa. Zwalniam stowarzyszenie Jacht Klub Morski „Joseph
        Conrad” w Kołobrzegu od ewentualnej odpowiedzialności cywilnej za
        wyrządzone szkody wobec mojej osoby oraz mojego mienia w trakcie
        realizacji zadań statutowych, ze szczególnym uwzględnieniem czasu
        szkolenia żeglarskiego, rejsów żeglarskich oraz prac technicznych
        (bosmańskich) w klubie. Wyrażam zgodę na przechowywanie i przetwarzanie
        moich danych osobowych do celów informacyjnych i marketingowych Jacht
        Klubu Morskiego „Joseph Conrad” w Kołobrzegu, mając równocześnie
        świadomość prawa do wglądu, poprawiania bądź usuwania moich danych
        osobowych.
      </label>
    </div>
  </div>

  <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response" />

  <button id="my-form-button" class="btn btn-primary w-100 mt-3">Wyślij</button>
  <p id="my-form-status"></p>
</form>
<script src="https://www.google.com/recaptcha/api.js?render=6LeWl3AkAAAAAPsJsIBeGJ26jxw2niE6qx7WMINK"></script>
<script>
  grecaptcha.ready(function () {
    grecaptcha
      .execute("6LeWl3AkAAAAAPsJsIBeGJ26jxw2niE6qx7WMINK", { action: "submit" })
      .then(function (token) {
        console.info("got token: " + token);
        document.getElementById("g-recaptcha-response").value = token;
      });
  });
</script>
<script>
  var form = document.getElementById("join-us-form");

  async function handleSubmit(event) {
    event.preventDefault();
    var status = document.getElementById("my-form-status");
    var data = new FormData(event.target);
    fetch(event.target.action, {
      method: form.method,
      body: data,
      headers: {
        Accept: "application/json",
      },
    })
      .then((response) => {
        if (response.ok) {
          status.classList.add("text-success");
          status.innerHTML = "Twoja wiadomość została wysłana!";
          form.reset();
        } else {
          response.json().then((data) => {
            if (Object.hasOwn(data, "errors")) {
              status.innerHTML = data["errors"]
                .map((error) => error["message"])
                .join(", ");
            } else {
              status.classList.add("text-danger");
              status.innerHTML = "Coś poszło nie tak, spróbuj ponownie później";
            }
          });
        }
      })
      .catch((error) => {
        status.classList.add("text-danger");
        status.innerHTML = "Coś poszło nie tak, spróbuj ponownie później";
      });
  }

  form.addEventListener("submit", handleSubmit);
</script>
